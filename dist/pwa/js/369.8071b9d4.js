"use strict";(globalThis["webpackChunkastral"]=globalThis["webpackChunkastral"]||[]).push([[369],{55369:(e,t,r)=>{r.r(t),r.d(t,{default:()=>k});var o=r(59835),s=r(86970),n=r(61957);const i=e=>((0,o.dD)("data-v-54f4541e"),e=e(),(0,o.Cn)(),e),l={class:"q-py-md q-px-sm"},a=i((()=>(0,o._)("div",{class:"text-bold"},"sql query",-1))),d={style:{display:"flex","flex-direction":"row",gap:"1rem",padding:".5rem 0","align-items":"center"}},u=(0,o.Uk)("Execute"),c=i((()=>(0,o._)("div",{id:"error",class:"error"},null,-1))),m=i((()=>(0,o._)("pre",{id:"output"},"Results will be displayed here",-1)));function h(e,t,r,i,h,p){const g=(0,o.up)("BaseHeader"),w=(0,o.up)("q-btn"),x=(0,o.up)("q-table"),E=(0,o.up)("q-page");return(0,o.wg)(),(0,o.j4)(E,null,{default:(0,o.w5)((()=>[(0,o.Wm)(g,null,{default:(0,o.w5)((()=>[(0,o.Uk)((0,s.zw)(e.$t("devTools")),1)])),_:1}),(0,o._)("div",l,[a,(0,o.wy)((0,o._)("textarea",{"onUpdate:modelValue":t[0]||(t[0]=t=>e.sql=t),id:"editor"},null,512),[[n.nr,e.sql]]),(0,o._)("div",d,[(0,o.Wm)(w,{id:"execute",color:"primary",outline:"",onClick:e.execEditorContents},{default:(0,o.w5)((()=>[u])),_:1},8,["onClick"])]),c,e.rows.length?((0,o.wg)(),(0,o.j4)(x,{key:0,rows:e.rows,dense:"","wrap-cells":"","rows-per-page-options":[10,50,100,0]},null,8,["rows"])):(0,o.kq)("",!0),m])])),_:1})}r(18964);var p=r(18933),g=r(34136),w=r(13555),x=r.n(w);r(50053);const E=(0,o.aZ)({name:"DevTools",mixins:[p.Z],components:{},data(){return{codeEditor:null,tictime:null,sql:"SELECT * FROM nostr_events;\n-- SELECT * FROM nostr_users;",rows:[]}},computed:{editor(){return document.getElementById("editor")},commands(){return document.getElementById("commands")},executeButton(){return document.getElementById("execute")},output(){return document.getElementById("output")},error(){return document.getElementById("error")}},mounted(){this.codeEditor=x().fromTextArea(this.editor,{mode:"text/x-sql",theme:"dracula",viewportMargin:1/0,indentWithTabs:!0,smartIndent:!0,lineNumbers:!0,matchBrackets:!0,autofocus:!0,extraKeys:{"Ctrl-Enter":this.execEditorContents}})},activated(){},deactivated(){},methods:{execEditorContents(){console.log("sql",this.codeEditor.getValue()),this.noerror(),this.rows=[],this.execute(this.codeEditor.getValue()+";")},async execute(e){let t;this.tic(),this.output.textContent="Fetching results...",t=await(0,g.$d)(e),this.toc("Executing SQL"),this.tic(),this.output.innerHTML="",t&&t.length?(this.rows=t,this.toc("Displaying results")):this.print("0 rows returned")},print(e){this.output.innerHTML=e.replace(/\n/g,"<br>")},displayError(e){console.log(e),this.error.style.height="2em",this.error.textContent=e.message},noerror(){this.error.style.height="0"},tic(){this.tictime=Date.now()},toc(e){let t=Date.now()-this.tictime;console.log((e||"toc")+": "+t+"ms")}}});var y=r(11639),v=r(69885),b=r(24455),q=r(64865),C=r(47817),_=r(69984),T=r.n(_);const f=(0,y.Z)(E,[["render",h],["__scopeId","data-v-54f4541e"]]),k=f;T()(E,"components",{QPage:v.Z,QBtn:b.Z,QTable:q.Z,QTabs:C.Z})}}]);