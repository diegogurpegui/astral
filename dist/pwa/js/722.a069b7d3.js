"use strict";(globalThis["webpackChunkastral"]=globalThis["webpackChunkastral"]||[]).push([[722],{39722:(e,t,i)=>{i.r(t),i.d(t,{default:()=>ee});i(40702);var n=i(59835),a=i(89520),o=i.n(a);const s=e=>((0,n.dD)("data-v-281eef0c"),e=e(),(0,n.Cn)(),e),l=s((()=>(0,n._)("img",{alt:"astral logo",src:o(),style:{width:"200px",height:"200px"}},null,-1)));function r(e,t,i,a,o,s){const r=(0,n.up)("TheKeyInitializationDialog"),u=(0,n.up)("q-page");return(0,n.wg)(),(0,n.j4)(u,{class:"flex column justify-center items-center"},{default:(0,n.w5)((()=>[l,e.$store.state.keys.pub?(0,n.kq)("",!0):((0,n.wg)(),(0,n.j4)(r,{key:0}))])),_:1})}var u=i(86970);const c={key:0},y=(0,n._)("h1",{class:"text-h6"},"welcome to astral",-1),d=(0,n.Uk)(" astral is a decentralized, censorship resistant social platform powered by the [Nostr](https://github.com/fiatjaf/nostr) protocol. in order to participate in the Nostr network you will need to a public key and private key pair: "),h=(0,n.Uk)("public key"),p=(0,n.Uk)(" publicly known unique ID associated with your user on the Nostr network. can be shared freely. others can see your posts or follow you using only your public key. "),k=(0,n.Uk)("private key"),m=(0,n._)("strong",null,"KEEP THIS SECRET!",-1),w=(0,n.Uk)(" secret key used to sign for (or unlock) your public key. all content from your user public key will need a signature derived from your private key before being relayed. if a bad actor discovers your private key they can impersonate you on Nostr network. "),f=(0,n._)("p",null,[(0,n.Uk)(" if you don't have a Nostr key pair you can either "),(0,n._)("strong",null,"generate"),(0,n.Uk)(" a new key pair or just take a "),(0,n._)("strong",null,"look around"),(0,n.Uk)(". ")],-1),b=(0,n.Uk)(" generate "),g=(0,n.Uk)(" look around "),v=(0,n._)("h2",{class:"text-subtitle2"},"enter your key",-1),K={key:0},x={key:1},_={key:2},q={key:3},W=(0,n.Uk)(" Use Public Key from Extension "),C={key:0};function I(e,t,i,a,o,s){const l=(0,n.up)("BaseMarkdown"),r=(0,n.up)("q-item-label"),I=(0,n.up)("q-item-section"),Z=(0,n.up)("q-item"),O=(0,n.up)("q-list"),z=(0,n.up)("q-card-section"),B=(0,n.up)("q-btn"),Q=(0,n.up)("q-btn-group"),U=(0,n.up)("q-input"),D=(0,n.up)("q-form"),S=(0,n.up)("q-card");return e.showKeyInitialization?((0,n.wg)(),(0,n.iD)("div",c,[(0,n.Wm)(S,{style:{background:"unset"}},{default:(0,n.w5)((()=>[(0,n.Wm)(z,{class:"intro"},{default:(0,n.w5)((()=>[y,(0,n.Wm)(l,null,{default:(0,n.w5)((()=>[d])),_:1}),(0,n.Wm)(O,{bordered:"",padding:"",class:"q-mt-sm q-mb-sm"},{default:(0,n.w5)((()=>[(0,n.Wm)(Z,null,{default:(0,n.w5)((()=>[(0,n.Wm)(I,null,{default:(0,n.w5)((()=>[(0,n.Wm)(r,null,{default:(0,n.w5)((()=>[h])),_:1}),(0,n.Wm)(r,{caption:""},{default:(0,n.w5)((()=>[p])),_:1})])),_:1})])),_:1}),(0,n.Wm)(Z,null,{default:(0,n.w5)((()=>[(0,n.Wm)(I,null,{default:(0,n.w5)((()=>[(0,n.Wm)(r,null,{default:(0,n.w5)((()=>[k])),_:1}),(0,n.Wm)(r,{caption:""},{default:(0,n.w5)((()=>[m,w])),_:1})])),_:1})])),_:1})])),_:1})])),_:1}),(0,n.Wm)(z,{class:"onboard"},{default:(0,n.w5)((()=>[f,(0,n.Wm)(Q,{spread:"",unelevated:"",class:"q-gutter-xl"},{default:(0,n.w5)((()=>[(0,n.Wm)(B,{size:"sm",outline:"",onClick:e.generate,color:"primary"},{default:(0,n.w5)((()=>[b])),_:1},8,["onClick"]),(0,n.Wm)(B,{size:"sm",outline:"",color:"primary",to:{name:"feed"}},{default:(0,n.w5)((()=>[g])),_:1})])),_:1})])),_:1}),(0,n.Wm)(D,{onSubmit:e.proceed},{default:(0,n.w5)((()=>[(0,n.Wm)(z,{class:"key-entry"},{default:(0,n.w5)((()=>[v,(0,n.Wm)(Q,{spread:"",unelevated:""},{default:(0,n.w5)((()=>[(0,n.Wm)(B,{size:"sm",color:"primary",label:"public key",outline:!e.watchOnly,"text-color":e.watchOnly?"dark":"",value:"true",onClick:t[0]||(t[0]=t=>e.watchOnly=!0),disable:e.isBech32Sec},null,8,["outline","text-color","disable"]),(0,n.Wm)(B,{size:"sm",color:"primary",label:"private key",outline:e.watchOnly,"text-color":e.watchOnly?"":"dark",value:"false",onClick:t[1]||(t[1]=t=>e.watchOnly=!1),disable:e.isBech32Pub},null,8,["outline","text-color","disable"])])),_:1}),(0,n.Wm)(U,{modelValue:e.key,"onUpdate:modelValue":t[2]||(t[2]=t=>e.key=t),ref:"keyInput","bottom-slots":"",outlined:"",label:e.watchOnly?"enter public key":"enter private key",dense:""},{hint:(0,n.w5)((()=>[!e.key&&e.watchOnly?((0,n.wg)(),(0,n.iD)("p",K," entering public key means you will need to enter private key each time you post content (either manually or by Nostr browser extension) ")):(0,n.kq)("",!0),e.key||e.watchOnly?(0,n.kq)("",!0):((0,n.wg)(),(0,n.iD)("p",x," entering private key means astral will automatically sign with your private key each time you post content ")),e.key&&!e.isKeyValid?((0,n.wg)(),(0,n.iD)("p",_,"not a valid key")):(0,n.kq)("",!0),e.isKeyValid?((0,n.wg)(),(0,n.iD)("p",q,"key is valid")):(0,n.kq)("",!0)])),append:(0,n.w5)((()=>[e.hasExtension&&!e.isKeyValid?((0,n.wg)(),(0,n.j4)(B,{key:0,size:"sm",color:"primary",outline:"",onClick:e.getFromExtension},{default:(0,n.w5)((()=>[W])),_:1},8,["onClick"])):(0,n.kq)("",!0),(0,n.Wm)(B,{type:"submit",unelevated:"",size:"sm",color:"positive",label:e.isKeyValid?"proceed":"","icon-right":"login",onClick:e.proceed,disabled:!e.isKeyValid},null,8,["label","onClick","disabled"])])),_:1},8,["modelValue","label"])])),_:1})])),_:1},8,["onSubmit"]),e.isBeck32Key(e.key)?((0,n.wg)(),(0,n.iD)("div",C,(0,u.zw)(e.hexKey),1)):(0,n.kq)("",!0)])),_:1})])):(0,n.kq)("",!0)}i(46727);var Z=i(18933),O=i(74961),z=i(67694),B=i(11560),Q=i(63602);const U=(0,n.aZ)({name:"TheKeyInitializationDialog",mixins:[Z.Z],components:{BaseMarkdown:Q.Z},setup(){return{focusKeyInput(){this.$refs.keyInput.focus()}}},data(){return{watchOnly:!1,key:null,hasExtension:!1}},computed:{icon(){return document.getElementById("icon").href},showKeyInitialization(){return!["profile","event","hashtag","feed"].includes(this.$route.name)},isKeyKey(){return!!this.isKey(this.hexKey)},isKeyValid(){var e;return!!this.isKeyKey||!!(0,O.jk)(null===(e=this.key)||void 0===e?void 0:e.toLowerCase())},hexKey(){var e;if(this.isBeck32Key(this.key)){let{data:e}=(0,B.Jx)(this.key.toLowerCase());return this.toHexString(e)}return null===(e=this.key)||void 0===e?void 0:e.toLowerCase()},isBech32Pub(){if(this.isBeck32Key(this.key)){let{prefix:e}=(0,B.Jx)(this.key.toLowerCase());return"npub"===e}return!1},isBech32Sec(){if(this.isBeck32Key(this.key)){let{prefix:e}=(0,B.Jx)(this.key.toLowerCase());return"nsec"===e}return!1}},async created(){this.$store.state.keys.pub||setTimeout((()=>{window.nostr&&(this.hasExtension=!0)}),1e3)},methods:{async getFromExtension(){try{this.key=await window.nostr.getPublicKey(),this.watchOnly=!0,this.focusKeyInput()}catch(e){this.$q.notify({message:`Failed to get a public key from a Nostr extension: ${e}`,color:"warning"})}},generate(){this.key=(0,z.wQ)(),this.watchOnly=!1,this.focusKeyInput()},proceed(){let e=this.hexKey;var t={};(0,O.jk)(e)?t.mnemonic=e:this.isKey(e)?this.watchOnly?t.pub=e:t.priv=e:console.warn("Proceed called with invalid key",e),this.$store.dispatch("initKeys",t),this.$store.dispatch("launch"),this.initializeKeys=!1,this.$router.push({name:"settings",params:{showKeys:!0}})},isKey(e){var t;return!(null===e||void 0===e||null===(t=e.toLowerCase())||void 0===t||!t.match(/^[0-9a-f]{64}$/))},isBeck32Key(e){if("string"!==typeof e)return!1;try{let{prefix:t,data:i}=(0,B.Jx)(e.toLowerCase());if(!["npub","nsec"].includes(t))return!1;if("npub"===t&&(this.watchOnly=!0),"nsec"===t&&(this.watchOnly=!1),!this.isKey(this.toHexString(i)))return!1}catch(t){return!1}return!0},toHexString(e){return e.reduce(((e,t)=>{let i=t.toString(16);return 1===i.length&&(i="0"+i),e+i}),"")}}});var D=i(11639),S=i(87743),E=i(44458),$=i(63190),L=i(13246),V=i(490),j=i(76749),P=i(33115),T=i(67236),N=i(24455),F=i(8326),H=i(66611),J=i(69984),M=i.n(J);const G=(0,D.Z)(U,[["render",I]]),R=G;M()(U,"components",{QDialog:S.Z,QCard:E.Z,QCardSection:$.Z,QList:L.Z,QItem:V.Z,QItemSection:j.Z,QItemLabel:P.Z,QBtnGroup:T.Z,QBtn:N.Z,QForm:F.Z,QInput:H.Z});const A=(0,n.aZ)({name:"IndexPage",components:{TheKeyInitializationDialog:R}});var X=i(69885);const Y=(0,D.Z)(A,[["render",r],["__scopeId","data-v-281eef0c"]]),ee=Y;M()(A,"components",{QPage:X.Z})}}]);